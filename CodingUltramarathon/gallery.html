<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coding Ultramarathon</title>
    <script src="js/Project.js"></script>
    <script src="js/Pendulum.js"></script>
    <script src="js/FakeBackground.js"></script>
    <script src="js/NoGreenScreen.js"></script>
    <script src="js/GreenScreen.js"></script>
    <script src="js/ChessBoard.js"></script>
    <script src="js/Brightness.js"></script>
    <script src="js/Invert.js"></script>
    <script src="js/MotionBlur.js"></script>
    <script src="js/BlackAndWhite.js"></script>
    <script src="js/GrayScale.js"></script>
    <script src="js/HalfFlip.js"></script>
    <script src="js/Mirror.js"></script>
    <script src="js/Webcam.js"></script>
    <script src="js/FlappyBatB.js"></script>
    <script src="js/FlappyBatA.js"></script>
    <script src="js/FlamingBat.js"></script>
    <script src="js/MouseBat.js"></script>
    <script src="js/FlyingBat.js"></script>
    <script src="js/Bat.js"></script>
    <script src="js/Shooter.js"></script>
    <script src="js/ExplosionNoise.js"></script>
    <script src="js/Explosion.js"></script>
    <script src="js/Asteroids.js"></script>
    <script src="js/Steering.js"></script>
    <script src="js/Asteroid.js"></script>
    <script src="js/Ignition.js"></script>
    <script src="js/SpaceFlight.js"></script>
    <script src="js/SpaceShip.js"></script>
    <script src="js/Whiteboard.js"></script>
    <script src="js/EngineNoise.js"></script>
    <script src="js/ExtendedPiano.js"></script>
    <script src="js/LaserSound.js"></script>
    <script src="js/Song.js"></script>
    <script src="js/Buttons.js"></script>
    <script src="js/Piano.js"></script>
    <script src="js/MusicalNote.js"></script>
    <script src="js/Sound.js"></script>
    <script src="js/GloomyForest.js"></script>
    <script src="js/BurningForest.js"></script>
    <script src="js/WhiteForest.js"></script>
    <script src="js/DarkForest.js"></script>
    <script src="js/Forest.js"></script>
    <script src="js/Lightning.js"></script>
    <script src="js/LeafySpruce.js"></script>
    <script src="js/Spruce.js"></script>
    <script src="js/Oak.js"></script>
    <script src="js/Rainbow.js"></script>
    <script src="js/Aurora.js"></script>
    <script src="js/Moon.js"></script>
    <script src="js/Cloud.js"></script>
    <script src="js/Fire.js"></script>
    <script src="js/Rain.js"></script>
    <script src="js/RetroTV.js"></script>
    <script src="js/SnowFall.js"></script>
    <script src="js/StarryNight.js"></script>
    <script src="js/Constellation.js"></script>
    <script src="js/ShootingStars.js"></script>

    <style>
        body {
            background: black;
            text-align: center;
        }

        canvas {
            background: white;
            margin: 1vh;
            width: 80vh;
            height: 80vh;
        }
    </style>
    <script>
        const CANVAS_SIZE=1000;
        const projectCount=99;

        // const AUDIO_CONTEXT=new(AudioContext||webkitAudioContext)
        // 사실 이렇게 해도 정상 동작함!
        let AUDIO_CONTEXT
        let VIDEO;

        const projects = [
            null, // index 0
            Pendulum,
            FakeBackground,
            NoGreenScreen,
            GreenScreen,
            ChessBoard,
            Brightness,
            Invert,
            MotionBlur,
            BlackAndWhite,
            GrayScale,
            HalfFlip,
            Mirror,
            Webcam,
            FlappyBatB,
            FlappyBatA,
            FlamingBat,
            MouseBat,
            FlyingBat,
            Bat,
            Shooter,
            ExplosionNoise,
            Explosion,
            Asteroids,
            Steering,
            Asteroid,
            Ignition,
            SpaceFlight,
            SpaceShip,
            Whiteboard,
            EngineNoise,
            ExtendedPiano,
            LaserSound,
            Song,
            Buttons,
            Piano,
            MusicalNote,
            Sound,
            GloomyForest,
            BurningForest,
            WhiteForest,
            DarkForest,
            Forest,
            Lightning,
            LeafySpruce,
            Spruce,
            Oak,
            Rainbow,
            Aurora,
            Moon,
            Cloud,
            Fire,
            Rain,
            RetroTV,
            SnowFall,
            ShootingStars,
            Constellation,
            StarryNight
        ]

        function main() {
            initializeCanvases()
            AUDIO_CONTEXT=new(AudioContext||webkitAudioContext)
            
            initializeCamera()

            for (let i=1; i<projects.length; i++){
                new projects[i](document.getElementById("canvas_"+i))
            }
        }
        
        function initializeCanvases(){
            for (let i=1; i<=projectCount; i++) {
                
                const canvas = document.createElement('canvas');

                canvas.id = "canvas_"+i;
                canvas.width = CANVAS_SIZE;
                canvas.height = CANVAS_SIZE;

                var body = document.getElementsByTagName("body")[0];
                body.appendChild(canvas);
            }
        }

        function initializeCamera(){
            let promise = navigator.mediaDevices.
                getUserMedia({video:true})
            promise.then(function(signal){
                VIDEO=document.createElement('video')
                VIDEO.srcObject=signal
                VIDEO.play()
            }).catch(function(err){
                alert("camera error")
            })
        }
    </script>
</head>
<body onload="main()">
    
</body>
</html>